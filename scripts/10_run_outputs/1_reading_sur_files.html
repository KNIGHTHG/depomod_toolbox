<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2018a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>Reading sur files</title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.2339992523193px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { text-align: left; line-height: 26.3999996185303px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 22px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { text-align: left; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { text-align: left; line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S6 { font-family: Helvetica, Arial, sans-serif; margin-left: 0px; margin-top: 10px; margin-bottom: 20px; margin-right: 0px;  }
.S7 { text-align: left; line-height: 21px; white-space: pre-wrap; white-space: pre-wrap; margin-left: 56px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S8 { text-align: center; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S9 { font-style: italic; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S10 { text-decoration: underline; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S11 { margin-left: 3px; margin-top: 10px; margin-bottom: 10px; margin-right: 3px;  }
.S12 { min-height: 18px; white-space: nowrap; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S13 { min-height: 0px; white-space: pre; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S14 { color: rgb(160, 32, 240); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S15 { color: rgb(64, 64, 64); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S16 { text-align: left; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 10px; margin-bottom: 9px; margin-right: 10px;  }
.S17 { margin-left: 3px; margin-top: 10px; margin-bottom: 4px; margin-right: 3px;  }
.S18 { font-weight: bold; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }

.CodeBlock {margin: 10px 0 10px 0; background-color: #F7F7F7;}
.CodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
.outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}
.outputRegion {}
.outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}
.inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}
.outputParagraph:empty {margin: 0;}
.inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}
.embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}
.embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}
.embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {}
.embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: auto;}
.embeddedOutputsSymbolicElement { overflow: initial !important;}
.embeddedOutputsSymbolicElement { width: 100% !important; }
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement,.rtcDataTipElement .textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}
.veSpecifier {}
.veContainer {}
.veSpecifierBox {height: 400px; width: 500px;}
.veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}
.veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}
.veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}
.veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}
.veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}
.veMetaSummary {font-style: italic;}
.veSpecifier .veTable .scroller {overflow: hidden;}
.veSpecifier .veTable:hover .scroller {overflow: auto;}
.veSpecifier .veVariableName,.veSpecifier .veDimensionFont {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}
.veSpecifier .veVariableName {padding-top: 2px;}
.veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}
.veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}
.veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}
.veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}
.veSpecifier .mw_type_ListBase.showCellBorders,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper,.veSpecifier .veTable .verticalScrollSpacer,.veSpecifier .veTable .horizontalScrollSpacer {border: none;}
.veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode,.veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}
.veSpecifier .veTable .dataBody {color: #000000;}
.veSpecifier .veTable .columnHeaderNode .cell .drag,.veSpecifier .veTable .columnHeaderNode .cell .header,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}
.veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}
.veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}
.veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}
.veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.embeddedOutputsVariableElement {white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}
.variableElement {}
.embeddedOutputsVariableElement.inlineElement {}
.inlineElement .variableElement {}
.variableNameElement {margin-bottom: 3px; display: inline-block;}
.variableValue { width: 100% !important; }
.embeddedOutputsMatrixElement,.eoOutputWrapper .matrixElement {min-height: 18px; box-sizing: border-box;}
.embeddedOutputsMatrixElement .matrixElement,.eoOutputWrapper .matrixElement,.rtcDataTipElement .matrixElement {position: relative;}
.matrixElement .variableValue,.rtcDataTipElement .matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}
.embeddedOutputsMatrixElement.inlineElement {}
.embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}
.embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}
.inlineElement .matrixElement {max-height: 300px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer,.eoOutputWrapper .matrixElement .valueContainer,.rtcDataTipElement .matrixElement .valueContainer {white-space: nowrap; margin-bottom: 3px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide,.eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis.hide,.eoOutputWrapper .matrixElement .verticalEllipsis.hide,.rtcDataTipElement .matrixElement .valueContainer .horizontalEllipsis.hide,.rtcDataTipElement .matrixElement .verticalEllipsis.hide {display: none;}
.embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .verticalEllipsis, .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .horizontalEllipsis {display:none;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis,.eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}
.eoOutputWrapper .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer {cursor: default !important;}
.matrixElement { max-height: none !important; }
.embeddedOutputsVariableTableElement .ClientViewDiv table tr {height: 22px; white-space: nowrap;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr td,.embeddedOutputsVariableTableElement .ClientViewDiv table tr th {min-width : 75px; max-width : 75px; background-color:white; text-overflow: ellipsis; font-family: 'Arial', sans-serif; font-size: 12px; overflow : hidden;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tbody tr th {width: 34px; max-width: 100px;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr span {text-overflow: ellipsis; padding: 3px;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr th {color: rgba(0,0,0,0.5); padding: 3px; font-size: 9px;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr th:first-child {min-width: 28px; max-width: 250px;}
.dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}
.alertPlugin-onTextLine {visibility: hidden;}
.alertPlugin-hasTooltip .alertPlugin-warningImg,.alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}
.alertPlugin-alertLine .alertPlugin-warningElement,.alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}
.alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}
.diagnosticMessage-wrapper {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
.variableNameElement .headerElement {color: rgb(179, 179, 179); font-style: italic;}
.variableNameElement .headerElement .headerDataType {color: rgb(147, 176, 230);}
.matrixElement .horizontalEllipsis,.rtcDataTipElement .matrixElement .horizontalEllipsis {display: inline-block; margin-top: 3px; width: 30px; height: 12px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAJCAYAAADO1CeCAAAAJUlEQVR42mP4//8/A70xw0i29BUDFPxnAEtTW37wWDqakIa4pQDvOOG89lHX2gAAAABJRU5ErkJggg==");}
.matrixElement .verticalEllipsis,.textElement .verticalEllipsis,.rtcDataTipElement .matrixElement .verticalEllipsis,.rtcDataTipElement .textElement .verticalEllipsis {margin-left: 35px; width: 12px; height: 30px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAZCAYAAAAIcL+IAAAALklEQVR42mP4//8/AzGYgWyFMECMwv8QddRS+P//KyimlmcGUOFoOI6GI/UVAgDnd8Dd4+NCwgAAAABJRU5ErkJggg==");}
</style></head><body><div class = "content"><div class = 'SectionBlock containment active'><h1 class = "S1"><span class = "S2"><span class="S0">Reading sur files</span></span></h1><div class = "S3"><span class = "S2"><span class="S0">This guide explains show to read into Matlab the sur files produced by model runs</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">About</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">One of the output file types written by the model is termed a "sur" file which shorthand for "surface". This file describes the spatial distribution of material on the seabed at a particular point in time, often the model end point but potentially other points in the model duration. This files are written </span></span><span class = "S2"><span class="S5">\results</span></span><span class = "S2"><span class="S0"> directory.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">The sur file describes information on the seabed impact on a cell by cell basis. For solids runs this represents cumulative grams of solids per m2 up to that point in time in the model. (For chemical runs it represents ug of chemical per kg of sediment at that point in the model run).</span></span></div><div class = "S3"><span class = "S2"><span class="S0">For solids runs two sur files are written</span></span></div><ul class = "S6"><li class = "S7"><span class = "S0"><span class="S0">  solids sur (total solids mass)</span></span></li><li class = "S7"><span class = "S0"><span class="S0">  carbon sur (solids carbon mass)</span></span></li></ul><div class = "S3"><span class = "S2"><span class="S0">For chemical runs, sur files describing chemical concentrations are also ouputted.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Some useful ways to analyse this information that are provide in the toolbox are:</span></span></div><ul class = "S6"><li class = "S7"><span class = "S0"><span class="S0">  plot the impact</span></span></li><li class = "S7"><span class = "S0"><span class="S0">  calculate the area of the impact at a particular intensity level</span></span></li><li class = "S7"><span class = "S0"><span class="S0">  calculate the total mass across the domain or within a particular intensity level</span></span></li><li class = "S7"><span class = "S0"><span class="S0">  find the size and location of the maximum intensity of impact</span></span></li><li class = "S7"><span class = "S0"><span class="S0">  find the value at a specific location</span></span></li></ul><div class = "S3"><span class = "S2"><span class="S0">Sur files are named according to the following conventions</span></span></div><div class = "S8"><span class = "S2"><span class="S5">{project_name}-{run_label}-{run_type}-{tide}-{output_type}-{decay}-{timestamp}.depomodresultssur</span></span></div><div class = "S3"><span class = "S2"><span class="S0">where:</span></span></div><ul class = "S6"><li class = "S7"><span class = "S0"><span class="S5">project_name </span></span><span class = "S0"><span class="S0">is the project name</span></span></li><li class = "S7"><span class = "S0"><span class="S5">run_label </span></span><span class = "S0"><span class="S0">is the label for the model simulation (a number or alpha-numeric descriptor)</span></span></li><li class = "S7"><span class = "S0"><span class="S5">run_type </span></span><span class = "S0"><span class="S0">can be </span></span><span class = "S0"><span class="S5">NONE</span></span><span class = "S0"><span class="S0"> (organic solids only), </span></span><span class = "S0"><span class="S5">EMBZ</span></span><span class = "S0"><span class="S0"> or </span></span><span class = "S0"><span class="S5">TFBZ</span></span></li><li class = "S7"><span class = "S0"><span class="S5">tide </span></span><span class = "S0"><span class="S0">can be </span></span><span class = "S0"><span class="S5">N</span></span><span class = "S0"><span class="S0"> or </span></span><span class = "S0"><span class="S5">S</span></span><span class = "S0"><span class="S0"> (mostly redundant)</span></span></li><li class = "S7"><span class = "S0"><span class="S5">output_type </span></span><span class = "S0"><span class="S0">can be </span></span><span class = "S0"><span class="S5">solids</span></span><span class = "S0"><span class="S0">, </span></span><span class = "S0"><span class="S5">carbon</span></span><span class = "S0"><span class="S0">, or </span></span><span class = "S0"><span class="S5">chemical</span></span></li><li class = "S7"><span class = "S0"><span class="S5">decay </span></span><span class = "S0"><span class="S0">can be </span></span><span class = "S0"><span class="S5">g0</span></span><span class = "S0"><span class="S0"> or </span></span><span class = "S0"><span class="S5">g1</span></span><span class = "S0"><span class="S0"> - indicating the absence or presence of decay, respectively</span></span></li><li class = "S7"><span class = "S0"><span class="S5">timestamp </span></span><span class = "S0"><span class="S0">represents the output time point in seconds</span></span></li></ul><div class = "S3"><span class = "S2"><span class="S0">Sur files which are produced to describe the final state of the seabed at the end of a model run do not include a </span></span><span class = "S2"><span class="S5">timestamp</span></span><span class = "S2"><span class="S0"> descriptor in their filename.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">For example, the following</span></span></div><div class = "S8"><span class = "S2"><span class="S5">bay_of_fish-15-NONE-N-solids-g0-26622000.depomodresultssur</span></span></div><div class = "S3"><span class = "S2"><span class="S0">would describe the organic solids output (featuring no decay) on the 308th day of an organic solids run labelled "15".</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Alternatively, the following</span></span></div><div class = "S8"><span class = "S2"><span class="S5">bay_of_fish-hindcast_2016-EMBZ-N-chemical-g1.depomodresultssur</span></span></div><div class = "S3"><span class = "S2"><span class="S0">would describe the medicine concentrations</span></span><span class = "S2"><span class="S9"> at the end</span></span><span class = "S2"><span class="S0"> of an EmBZ simulation (no </span></span><span class = "S2"><span class="S5">timestamp</span></span><span class = "S2"><span class="S0">) labelled "hindcast_2016" and inclusive of decay.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">IMPORTANT: a note on units</span></span></h2><div class = "S3"><span class = "S2"><span class="S10">The sur files which are written at the end of the model run are normalised to 365 days</span></span><span class = "S2"><span class="S0">. </span></span></div><div class = "S3"><span class = "S2"><span class="S0">This means that they do </span></span><span class = "S2"><span class="S10">not</span></span><span class = "S2"><span class="S0"> describe the seabed impact which was predicted at that particlar time point in the model, but instead are scaled according to the overall run duration in order to represent the nominally equivalent impact which would arise over 365 days (rather than whatever duration was actually modelled) . </span></span></div><div class = "S3"><span class = "S2"><span class="S0">This therefore changes the units implied by the sur file from g m-2 to g m-2 yr-1. This is based on an assumption of linearity - whatever accumulates in, say, 100 days, is half of what accumulates in 200 days. This assumption is highly questionable, particlarly for energetic environments. It is recommended that sur files which are configured for specific time points should be used as a best practice.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Initialise a sur file directly</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">Alternatively, a sur file can be instantiated directly by using the direct file path, e.g.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur = Depomod.Sur.Solids.fromFile(</span><span class="S14">'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur'</span><span class="S0">, </span><span class="S14">'version'</span><span class="S0">, 2)</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement scrollableOutput" uid="A694EF5A" data-testid="output_0" data-width="725" data-height="188" style="width: 755px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">sur = </span></div><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">  Solids with properties:<br><br>      rawDataValueCol: 'outCol1'<br>    defaultPlotLevels: [4 192 1553 10000]<br>          defaultUnit: 'g m^{-2}'<br>                 path: 'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur'<br>              rawData: [1×1 struct]<br>     interpolatedGrid: []<br>                    X: [80×1 double]<br>                    Y: [80×1 double]<br>                    Z: [80×80 double]<br>        GeoReferenced: 1</div></div></div></div></div></div><div class = "S16"><span class = "S2"><span class="S0">The </span></span><span class = "S2"><span class="S5">version</span></span><span class = "S2"><span class="S0"> = 2 parameter tells the toolbox that this is a </span></span><span class = "S2"><span class="S9">NewDepomod</span></span><span class = "S2"><span class="S0"> sur file rather than an </span></span><span class = "S2"><span class="S9">AutoDepomod</span></span><span class = "S2"><span class="S0"> sur file. </span></span></div><div class = "S3"><span class = "S2"><span class="S0">Notice the the sur object (of the class </span></span><span class = "S2"><span class="S5">Depomod.Sur.Solids</span></span><span class = "S2"><span class="S0">) has properties called </span></span><span class = "S2"><span class="S5">X</span></span><span class = "S2"><span class="S0">, </span></span><span class = "S2"><span class="S5">Y</span></span><span class = "S2"><span class="S0"> and </span></span><span class = "S2"><span class="S5">Z</span></span><span class = "S2"><span class="S0">. </span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur.X</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="3776005B" data-testid="output_1" data-width="725" style="width: 755px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="3776005B" data-testid="output_1" data-width="725" style="width: 755px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 725px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">80×1</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;172&quot;,&quot;totalColumns&quot;:&quot;1&quot;,&quot;totalRows&quot;:&quot;80&quot;,&quot;charsPerColumn&quot;:26}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 174px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">                  351327.5<br>                  351302.5<br>                  351277.5<br>                  351252.5<br>                  351227.5<br>                  351202.5<br>                  351177.5<br>                  351152.5<br>                  351127.5<br>                  351102.5<br></div><div class="horizontalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur.Y</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="AB34E628" data-testid="output_2" data-width="725" style="width: 755px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="AB34E628" data-testid="output_2" data-width="725" style="width: 755px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 725px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">80×1</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;172&quot;,&quot;totalColumns&quot;:&quot;1&quot;,&quot;totalRows&quot;:&quot;80&quot;,&quot;charsPerColumn&quot;:26}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 174px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">                 1069947.5<br>                 1069922.5<br>                 1069897.5<br>                 1069872.5<br>                 1069847.5<br>                 1069822.5<br>                 1069797.5<br>                 1069772.5<br>                 1069747.5<br>                 1069722.5<br></div><div class="horizontalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur.Z</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="455F98C1" data-testid="output_3" data-width="725" style="width: 755px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="455F98C1" data-testid="output_3" data-width="725" style="width: 755px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 725px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">80×80</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;40&quot;,&quot;totalColumns&quot;:&quot;80&quot;,&quot;totalRows&quot;:&quot;80&quot;,&quot;charsPerColumn&quot;:6}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 722px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br>     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0     0<br></div><div class="horizontalEllipsis" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div></div><div class = "S16"><span class = "S2"><span class="S0">These are what hold the seabed impact information and this data. In particlar the Z property holds the cell-by-cell seabed impact information.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Notice also that the file path can be discovered by accessing</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur.path</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="69462F64" data-testid="output_4" data-width="725" data-height="20" style="width: 755px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur'</div></div></div></div></div></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Initialise a sur file as part of a project</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">If you have a whole project set up then a sur file can be instantiated in Matlab by taking advantage of the navigation provided by the </span></span><span class = "S2"><span class="S5">NewDepomod.Project </span></span><span class = "S2"><span class="S0">and </span></span><span class = "S2"><span class="S5">NewDepomod.Run</span></span><span class = "S2"><span class="S0"> classes, without needing file paths etc. This can be particularly useful if there are many files to analyse.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0">projectDir = </span><span class="S14">'C:\newdepomod_projects\bay_of_fish'</span><span class="S0">;</span></span></div></div><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0">project    = Depomod.Project.create(projectDir);</span></span></div></div><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0"></span></span></div></div><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0">run = project.solidsRuns.first;</span></span></div></div></div><div class = "S16"><span class = "S2"><span class="S0">then an inputs file can be found via its associated run:</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur = run.solidsSur</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement scrollableOutput" uid="1D52480C" data-testid="output_5" data-width="725" data-height="188" style="width: 755px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">sur = </span></div><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">  Solids with properties:<br><br>      rawDataValueCol: 'outCol1'<br>    defaultPlotLevels: [4 192 1553 10000]<br>          defaultUnit: 'g m^{-2}'<br>                 path: 'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur'<br>              rawData: [1×1 struct]<br>     interpolatedGrid: []<br>                    X: [80×1 double]<br>                    Y: [80×1 double]<br>                    Z: [80×80 double]<br>        GeoReferenced: 1</div></div></div></div></div></div><div class = "S16"><span class = "S2"><span class="S0">This represents the solids sur file associated with the model endpoint. We can discover the filepath in two ways</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">run.solidsSurPath</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="BA752BA0" data-testid="output_6" data-width="725" data-height="20" style="width: 755px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur'</div></div></div></div></div><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur.path</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="9EA0312B" data-testid="output_7" data-width="725" data-height="20" style="width: 755px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur'</div></div></div></div></div></div><div class = "S16"><span class = "S2"><span class="S0">Which tells us that it is the same file that we read in more directly above.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Other sur files representing the model end point can be similarly accessed using</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S12 lineNode"><span class = "S13"><span class="S0">run.carbonSur</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement scrollableOutput" uid="8CEFB369" data-testid="output_8" data-width="725" data-height="188" style="width: 755px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span></div><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">  Solids with properties:<br><br>      rawDataValueCol: 'outCol1'<br>    defaultPlotLevels: [4 192 1553 10000]<br>          defaultUnit: 'g m^{-2}'<br>                 path: 'C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-carbon-g0.depomodresultssur'<br>              rawData: [1×1 struct]<br>     interpolatedGrid: []<br>                    X: [80×1 double]<br>                    Y: [80×1 double]<br>                    Z: [80×80 double]<br>        GeoReferenced: 1</div></div></div></div></div></div><div class = "S16"><span class = "S2"><span class="S0">and in the case of medicine run</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0">run.chemicalSur</span></span></div></div></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">More general sur helper methods</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">I many cases, we don't simply want the output from the model endpoint. A more general approach is to use the following methods. </span></span></div><div class = "S3"><span class = "S2"><span class="S0">To discover a general </span></span><span class = "S2"><span class="S10">sur file path</span></span><span class = "S2"><span class="S0">, we can use the </span></span><span class = "S2"><span class="S5">.surPath()</span></span><span class = "S2"><span class="S0"> method which allows use to specify the precise type, decay status and timestamp(s) of the sur(s) we want.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0">run.surPath(</span><span class="S14">'solids'</span><span class="S0">, </span><span class="S14">'g'</span><span class="S0">, 0, </span><span class="S14">'t'</span><span class="S0">, 31536000)</span></span></div></div></div><div class = "S16"><span class = "S2"><span class="S0">To actually </span></span><span class = "S2"><span class="S10">instantiate</span></span><span class = "S2"><span class="S0"> the sur we can use the similar </span></span><span class = "S2"><span class="S5">.sur()</span></span><span class = "S2"><span class="S0"> method, e.g.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S12 lineNode"><span class = "S13"><span class="S0">sur = run.sur(</span><span class="S14">'type'</span><span class="S0">, </span><span class="S14">'solids'</span><span class="S0">, </span><span class="S14">'g'</span><span class="S0">, 0, </span><span class="S14">'t'</span><span class="S0">, 31536000)</span></span></div></div></div><div class = "S16"><span class = "S2"><span class="S0">This allows us complete control over which sur files to request, but leaves the file path details down to Matlab. Note that in the case where a vector of timestamps is passed in, multiple sur files will be returned.</span></span></div><div class = "S3"><span class = "S2"><span class="S18">These methods are likely to be the most useful when modelling with NewDepomod within Matlab.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0"></span></span></h2></div></div><br><!-- <br>##### SOURCE BEGIN #####<br>%% Reading sur files<br>% This guide explains show to read into Matlab the sur files produced by model <br>% runs<br>%% About<br>% One of the output file types written by the model is termed a "sur" file which <br>% shorthand for "surface". This file describes the spatial distribution of material <br>% on the seabed at a particular point in time, often the model end point but potentially <br>% other points in the model duration. This files are written |\results| directory.<br>% <br>% The sur file describes information on the seabed impact on a cell by cell <br>% basis. For solids runs this represents cumulative grams of solids per m2 up <br>% to that point in time in the model. (For chemical runs it represents ug of chemical <br>% per kg of sediment at that point in the model run).<br>% <br>% For solids runs two sur files are written<br>% <br>% *   solids sur (total solids mass)<br>% *   carbon sur (solids carbon mass)<br>% <br>% For chemical runs, sur files describing chemical concentrations are also <br>% ouputted.<br>% <br>% Some useful ways to analyse this information that are provide in the toolbox <br>% are:<br>% <br>% *   plot the impact<br>% *   calculate the area of the impact at a particular intensity level<br>% *   calculate the total mass across the domain or within a particular intensity <br>% level<br>% *   find the size and location of the maximum intensity of impact<br>% *   find the value at a specific location<br>% <br>% Sur files are named according to the following conventions<br>% <br>% |{project_name}-{run_label}-{run_type}-{tide}-{output_type}-{decay}-{timestamp}.depomodresultssur|<br>% <br>% where:<br>% <br>% * |project_name |is the project name<br>% * |run_label |is the label for the model simulation (a number or alpha-numeric <br>% descriptor)<br>% * |run_type |can be |NONE| (organic solids only), |EMBZ| or |TFBZ|<br>% * |tide |can be |N| or |S| (mostly redundant)<br>% * |output_type |can be |solids|, |carbon|, or |chemical|<br>% * |decay |can be |g0| or |g1| - indicating the absence or presence of decay, <br>% respectively<br>% * |timestamp |represents the output time point in seconds<br>% <br>% Sur files which are produced to describe the final state of the seabed <br>% at the end of a model run do not include a |timestamp| descriptor in their filename.<br>% <br>% For example, the following<br>% <br>% |bay_of_fish-15-NONE-N-solids-g0-26622000.depomodresultssur|<br>% <br>% would describe the organic solids output (featuring no decay) on the 308th <br>% day of an organic solids run labelled "15".<br>% <br>% Alternatively, the following<br>% <br>% |bay_of_fish-hindcast_2016-EMBZ-N-chemical-g1.depomodresultssur|<br>% <br>% would describe the medicine concentrations_ at the end_ of an EmBZ simulation <br>% (no |timestamp|) labelled "hindcast_2016" and inclusive of decay.<br>%% *IMPORTANT: a note on units*<br>% The sur files which are written at the end of the model run are normalised <br>% to 365 days. <br>% <br>% This means that they do not describe the seabed impact which was predicted <br>% at that particlar time point in the model, but instead are scaled according <br>% to the overall run duration in order to represent the nominally equivalent impact <br>% which would arise over 365 days (rather than whatever duration was actually <br>% modelled) . <br>% <br>% This therefore changes the units implied by the sur file from g m-2 to <br>% g m-2 yr-1. This is based on an assumption of linearity - whatever accumulates <br>% in, say, 100 days, is half of what accumulates in 200 days. This assumption <br>% is highly questionable, particlarly for energetic environments. It is recommended <br>% that sur files which are configured for specific time points should be used <br>% as a best practice.<br>%% Initialise a sur file directly<br>% Alternatively, a sur file can be instantiated directly by using the direct <br>% file path, e.g.<br>%%<br>sur = Depomod.Sur.Solids.fromFile('C:\newdepomod_projects\bay_of_fish\depomod\results\bay_of_fish-1-NONE-N-solids-g0.depomodresultssur', 'version', 2)<br>%% <br>% The |version| = 2 parameter tells the toolbox that this is a _NewDepomod_ <br>% sur file rather than an _AutoDepomod_ sur file. <br>% <br>% Notice the the sur object (of the class |Depomod.Sur.Solids|) has properties <br>% called |X|, |Y| and |Z|. <br><br>sur.X<br>sur.Y<br>sur.Z<br>%% <br>% These are what hold the seabed impact information and this data. In particlar <br>% the Z property holds the cell-by-cell seabed impact information.<br>% <br>% Notice also that the file path can be discovered by accessing<br><br>sur.path<br>%% Initialise a sur file as part of a project<br>% If you have a whole project set up then a sur file can be instantiated in <br>% Matlab by taking advantage of the navigation provided by the |NewDepomod.Project <br>% |and |NewDepomod.Run| classes, without needing file paths etc. This can be particularly <br>% useful if there are many files to analyse.<br>%%<br>projectDir = 'C:\newdepomod_projects\bay_of_fish';<br>project    = Depomod.Project.create(projectDir);<br><br>run = project.solidsRuns.first;<br>%% <br>% then an inputs file can be found via its associated run:<br><br>sur = run.solidsSur<br>%% <br>% This represents the solids sur file associated with the model endpoint. <br>% We can discover the filepath in two ways<br><br>run.solidsSurPath<br>sur.path<br>%% <br>% Which tells us that it is the same file that we read in more directly <br>% above.<br>% <br>% Other sur files representing the model end point can be similarly accessed <br>% using<br><br>run.carbonSur<br>%% <br>% and in the case of medicine run<br><br>run.chemicalSur<br>%% More general sur helper methods<br>% I many cases, we don't simply want the output from the model endpoint. A more <br>% general approach is to use the following methods. <br>% <br>% To discover a general sur file path, we can use the |.surPath()| method <br>% which allows use to specify the precise type, decay status and timestamp(s) <br>% of the sur(s) we want.<br>%%<br>run.surPath('solids', 'g', 0, 't', 31536000)<br>%% <br>% To actually instantiate the sur we can use the similar |.sur()| method, <br>% e.g.<br><br>sur = run.sur('type', 'solids', 'g', 0, 't', 31536000)<br>%% <br>% This allows us complete control over which sur files to request, but leaves <br>% the file path details down to Matlab. Note that in the case where a vector of <br>% timestamps is passed in, multiple sur files will be returned.<br>% <br>% *These methods are likely to be the most useful when modelling with NewDepomod <br>% within Matlab.*<br>%%<br>##### SOURCE END #####<br>--></body></html>