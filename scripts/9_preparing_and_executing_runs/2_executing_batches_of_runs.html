<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2018a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>Executing batches of runs</title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.2339992523193px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { text-align: left; line-height: 26.3999996185303px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 22px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { text-align: left; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { text-align: left; line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { margin-left: 3px; margin-top: 10px; margin-bottom: 10px; margin-right: 3px;  }
.S6 { min-height: 18px; white-space: nowrap; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S7 { min-height: 0px; white-space: pre; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S8 { color: rgb(0, 0, 255); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S9 { color: rgb(160, 32, 240); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S10 { text-align: left; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 10px; margin-bottom: 9px; margin-right: 10px;  }
.S11 { font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }

.CodeBlock {margin: 10px 0 10px 0; background-color: #F7F7F7;}
.CodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
</style></head><body><div class = "content"><div class = 'SectionBlock containment active'><h1 class = "S1"><span class = "S2"><span class="S0">Executing batches of runs</span></span></h1><div class = "S3"><span class = "S2"><span class="S0">This guide explains how to use Matlab to execute groups of runs</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">About</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">Running batches of model simulations is straightfowardly achieved by placing the execution of model runs within loop structures. A couple of examples are provided below.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Running multiple biomass scenarios</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">A range of biomass scenarios can be tested by running multiple model runs via Matlab.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">biomasses = [1000 1100 1200 1300 1400 1500];</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0"></span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S8">for </span><span class="S0">b = 1:numel(biomasses)</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    biomass = biomass(b);</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    run = project.solidsRuns.new;</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    inputs = run.inputsFile;</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    inputs.setBiomass(biomass);</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    inputs.toFile;</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    run.execute(</span><span class="S9">'runInBackground'</span><span class="S0">)   </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S8">end</span></span></div></div></div><div class = "S10"><span class = "S2"><span class="S0">This loop creates a new run as a clone of the previous run and then changes the biomass according to the range of biomasses specified. This assumes that biomass is represented effectively using a constant equivalent feed rate and default assumes about digestibility, etc. This is only an example and the loop could include any amount of other configuration options such as required output or physical parameter changes.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Running multiple physical parameter scenarios</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">Another example of a situation in which multiple runs are useful is when testing a range of physical parameters. THis might be undertaken when calibrating the model to empirical data.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">verticalDispersion = [0.001 0.0012 0.0014 0.0016 0.0018 0.0020];</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0"></span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S8">for </span><span class="S0">vd = 1:numel(verticalDispersion)</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    vDispCoeff = verticalDispersion(vd);</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    run = project.solidsRuns.new(</span><span class="S9">'template'</span><span class="S0">, 5);</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    physicalProperties = run.physicalPropertiesFile;</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    physicalProperties.Transports.resuspension.walker.dispersionCoefficientZ = str2num(vDispCoeff);</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    physicalProperties.toFile;</span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S0">    run.execute(</span><span class="S9">'runInBackground'</span><span class="S0">)   </span></span></div></div><div class = 'inlineWrapper'><div class = "S6 lineNode"><span class = "S7"><span class="S8">end</span></span></div></div></div><div class = "S10"><span class = "S2"><span class="S0">This loop iterates through 6 candidate values for the vertical, resuspension dispersion coefficient and creates model simulations using those values. Note that in each case the new run is templated by run </span></span><span class = "S2"><span class="S11">5</span></span><span class = "S2"><span class="S0">. This is just an example of how new runs can be based on a specific template - for example a run that was already configured using the desired run duration or inputs or more general physical properties, etc. </span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><div class = "S3"><span class = "S2"><span class="S0"></span></span></div></div></div><br><!-- <br>##### SOURCE BEGIN #####<br>%% Executing batches of runs<br>% This guide explains how to use Matlab to execute groups of runs<br>%% About<br>% Running batches of model simulations is straightfowardly achieved by placing <br>% the execution of model runs within loop structures. A couple of examples are <br>% provided below.<br>%% Running multiple biomass scenarios<br>% A range of biomass scenarios can be tested by running multiple model runs <br>% via Matlab.<br>%%<br>biomasses = [1000 1100 1200 1300 1400 1500];<br><br>for b = 1:numel(biomasses)<br>    biomass = biomass(b);<br>    <br>    run = project.solidsRuns.new;<br>    <br>    inputs = run.inputsFile;<br>    inputs.setBiomass(biomass);<br>    inputs.toFile;<br>    <br>    run.execute('runInBackground')   <br>end<br>%% <br>% This loop creates a new run as a clone of the previous run and then changes <br>% the biomass according to the range of biomasses specified. This assumes that <br>% biomass is represented effectively using a constant equivalent feed rate and <br>% default assumes about digestibility, etc. This is only an example and the loop <br>% could include any amount of other configuration options such as required output <br>% or physical parameter changes.<br>%% Running multiple physical parameter scenarios<br>% Another example of a situation in which multiple runs are useful is when testing <br>% a range of physical parameters. THis might be undertaken when calibrating the <br>% model to empirical data.<br>%%<br>verticalDispersion = [0.001 0.0012 0.0014 0.0016 0.0018 0.0020];<br><br>for vd = 1:numel(verticalDispersion)<br>    vDispCoeff = verticalDispersion(vd);<br>    <br>    run = project.solidsRuns.new('template', 5);<br>    <br>    physicalProperties = run.physicalPropertiesFile;<br>    physicalProperties.Transports.resuspension.walker.dispersionCoefficientZ = str2num(vDispCoeff);<br>    physicalProperties.toFile;<br>    <br>    run.execute('runInBackground')   <br>end<br>%% <br>% This loop iterates through 6 candidate values for the vertical, resuspension <br>% dispersion coefficient and creates model simulations using those values. Note <br>% that in each case the new run is templated by run |5|. This is just an example <br>% of how new runs can be based on a specific template - for example a run that <br>% was already configured using the desired run duration or inputs or more general <br>% physical properties, etc. <br>% <br>%<br>##### SOURCE END #####<br>--></body></html>