<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="MATLAB R2018a"><meta http-equiv="X-UA-Compatible" content="IE=edge,IE=9,chrome=1"><title>Editing a model inputs file</title><style type="text/css">
* {margin: 0; padding: 0;}
body {text-align: start; line-height: 17.2339992523193px; min-height: 0px; white-space: normal; color: rgb(0, 0, 0); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-style: normal; font-size: 14px; font-weight: normal; text-decoration: none; white-space: normal; }
h1, h2 {font-weight: normal;}
.content { padding: 30px; }

.S0 { margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S1 { text-align: left; line-height: 26.3999996185303px; min-height: 24px; white-space: pre-wrap; color: rgb(213, 80, 0); font-family: Helvetica, Arial, sans-serif; font-size: 22px; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 15px; margin-right: 10px;  }
.S2 { min-height: 0px; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S3 { text-align: left; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 2px; margin-bottom: 9px; margin-right: 10px;  }
.S4 { text-align: left; line-height: 20.576000213623px; min-height: 20px; white-space: pre-wrap; color: rgb(60, 60, 60); font-family: Helvetica, Arial, sans-serif; font-size: 16px; font-weight: bold; white-space: pre-wrap; margin-left: 4px; margin-top: 3px; margin-bottom: 9px; margin-right: 10px;  }
.S5 { font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S6 { font-family: Helvetica, Arial, sans-serif; margin-left: 0px; margin-top: 10px; margin-bottom: 20px; margin-right: 0px;  }
.S7 { text-align: left; line-height: 21px; white-space: pre-wrap; white-space: pre-wrap; margin-left: 56px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S8 { margin-left: 3px; margin-top: 10px; margin-bottom: 10px; margin-right: 3px;  }
.S9 { min-height: 18px; white-space: nowrap; white-space: nowrap; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S10 { min-height: 0px; white-space: pre; white-space: pre; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S11 { color: rgb(64, 64, 64); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S12 { text-align: left; line-height: 21px; min-height: 17px; white-space: pre-wrap; font-family: Helvetica, Arial, sans-serif; white-space: pre-wrap; margin-left: 4px; margin-top: 10px; margin-bottom: 9px; margin-right: 10px;  }
.S13 { text-decoration: underline; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S14 { font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; text-decoration: underline; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S15 { color: rgb(160, 32, 240); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S16 { color: rgb(34, 139, 34); margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S17 { font-weight: bold; margin-left: 0px; margin-top: 0px; margin-bottom: 0px; margin-right: 0px;  }
.S18 { margin-left: 3px; margin-top: 10px; margin-bottom: 4px; margin-right: 3px;  }

.CodeBlock {margin: 10px 0 10px 0; background-color: #F7F7F7;}
.CodeBlock+.paragraphNode {margin-top: 10px;}
.lineNode {padding-left: 10px; border-left: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.inlineWrapper:first-child .lineNode,.inlineWrapper.outputs+.inlineWrapper .lineNode {padding-top: 5px; border-top: 1px solid #E9E9E9;}
.inlineWrapper:last-child .lineNode,.inlineWrapper.outputs .lineNode {padding-bottom: 5px; border-bottom: 1px solid #E9E9E9;}
.lineNode .textBox {white-space: pre;}
.outputGroup {margin: 2px 0 2px 0; padding: 2px 2px 2px 4px;}
.outputRegion {}
.outputParagraph {color: rgba(64, 64, 64, 1); padding: 10px 0 6px 17px; background: white; overflow-x: hidden;}
.inlineWrapper:last-child .outputParagraph {border-bottom-left-radius: 4px; border-bottom-right-radius: 4px;}
.outputParagraph:empty {margin: 0;}
.inlineElement .symbolicElement {margin-top: 1px; margin-bottom: 1px;}
.embeddedOutputsSymbolicElement .MathEquation {margin-top: 4px; margin-bottom: 4px;}
.embeddedOutputsSymbolicElement .MathEquation.displaySymbolicElement {margin-left: 15px;}
.embeddedOutputsSymbolicElement .MathEquation.inlineSymbolicElement {}
.embeddedOutputsSymbolicElement {overflow-x: auto; overflow-y: auto;}
.embeddedOutputsSymbolicElement { overflow: initial !important;}
.embeddedOutputsSymbolicElement { width: 100% !important; }
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement {white-space: pre; word-wrap: initial; min-height: 18px; max-height: 250px; overflow: auto;}
.textElement,.rtcDataTipElement .textElement {padding-top: 3px;}
.embeddedOutputsTextElement.inlineElement,.embeddedOutputsVariableStringElement.inlineElement {}
.inlineElement .textElement {}
.embeddedOutputsTextElement,.embeddedOutputsVariableStringElement { max-height: none !important; overflow: initial !important;}
.veSpecifier {}
.veContainer {}
.veSpecifierBox {height: 400px; width: 500px;}
.veSpecifier .veTable {padding-top: 3px; padding-bottom: 4px;}
.veSpecifierBox .veSpecifier .veContainer {position: relative; width: 100%; height: 370px;}
.veSpecifierBox .dijitDialogPaneContent {width: 97% !important; height: 88% !important;}
.veSpecifier .veTable .rowHeadersWrapper {padding-bottom: 0;}
.veSpecifier .veTable .scroller .variableEditorRenderers {padding-right: 3px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;}
.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {visibility: hidden; z-index: 0;}
.veMetaSummary {font-style: italic;}
.veSpecifier .veTable .scroller {overflow: hidden;}
.veSpecifier .veTable:hover .scroller {overflow: auto;}
.veSpecifier .veVariableName,.veSpecifier .veDimensionFont {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}
.veSpecifier .veVariableName {padding-top: 2px;}
.veSpecifier .veDimensionFont {font-style: italic; color: #9A9A9A;}
.veSpecifier .scroller::-webkit-scrollbar-track {background-color: white;}
.veSpecifier .scroller::-webkit-scrollbar-corner {background-color: white;}
.veSpecifier .veTable .topRowHeaderWrapper {border: none; background-color: #F8F9FA;}
.veSpecifier .mw_type_ListBase.showCellBorders,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper,.veSpecifier .veTable .verticalScrollSpacer,.veSpecifier .veTable .horizontalScrollSpacer {border: none;}
.veSpecifier .veTable .dataScrollerNode {border: 1px solid #BFBFBF;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode,.veSpecifier .veTable .dataBody {font-family: Arial; font-size: 13px;}
.veSpecifier .veTable .columnHeaderNode,.veSpecifier .veTable .rowHeaderNode {color: #7F7F7F;}
.veSpecifier .veTable .dataBody {color: #000000;}
.veSpecifier .veTable .columnHeaderNode .cell .drag,.veSpecifier .veTable .columnHeaderNode .cell .header,.veSpecifier .veTable .topHeaderWrapper,.veSpecifier .veTable .bottomRowHeaderWrapper {background-color: #F8F9FA;}
.veSpecifier .veTable .columnHeaderNode .cell .dragBorder {border-right: 1px solid #F8F9FA;}
.veSpecifier .veTable .rowHeaderNode .cell {padding-top: 3px; text-align: center; border-bottom: 1px solid #F8F9FA;}
.veSpecifier .veTable .dataBody .cell .plainText {text-align: right;}
.veSpecifier .veTable .dataBody .row .cell {border-bottom: 1px solid #E9E9E9; border-right: 1px solid #E9E9E9;}
.embeddedOutputsVariableElement {white-space: pre-wrap; word-wrap: break-word; min-height: 18px; max-height: 250px; overflow: auto;}
.variableElement {}
.embeddedOutputsVariableElement.inlineElement {}
.inlineElement .variableElement {}
.variableNameElement {margin-bottom: 3px; display: inline-block;}
.variableValue { width: 100% !important; }
.embeddedOutputsMatrixElement,.eoOutputWrapper .matrixElement {min-height: 18px; box-sizing: border-box;}
.embeddedOutputsMatrixElement .matrixElement,.eoOutputWrapper .matrixElement,.rtcDataTipElement .matrixElement {position: relative;}
.matrixElement .variableValue,.rtcDataTipElement .matrixElement .variableValue {white-space: pre; display: inline-block; vertical-align: top; overflow: hidden;}
.embeddedOutputsMatrixElement.inlineElement {}
.embeddedOutputsMatrixElement.inlineElement .topHeaderWrapper {display: none;}
.embeddedOutputsMatrixElement.inlineElement .veTable .body {padding-top: 0 !important; max-height: 100px;}
.inlineElement .matrixElement {max-height: 300px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer,.eoOutputWrapper .matrixElement .valueContainer,.rtcDataTipElement .matrixElement .valueContainer {white-space: nowrap; margin-bottom: 3px;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis.hide,.embeddedOutputsMatrixElement .matrixElement .verticalEllipsis.hide,.eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis.hide,.eoOutputWrapper .matrixElement .verticalEllipsis.hide,.rtcDataTipElement .matrixElement .valueContainer .horizontalEllipsis.hide,.rtcDataTipElement .matrixElement .verticalEllipsis.hide {display: none;}
.embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .verticalEllipsis, .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer.hideEllipses .horizontalEllipsis {display:none;}
.embeddedOutputsMatrixElement .matrixElement .valueContainer .horizontalEllipsis,.eoOutputWrapper .matrixElement .valueContainer .horizontalEllipsis {margin-bottom: -3px;}
.eoOutputWrapper .embeddedOutputsVariableMatrixElement .matrixElement .valueContainer {cursor: default !important;}
.matrixElement { max-height: none !important; }
.embeddedOutputsVariableTableElement .ClientViewDiv table tr {height: 22px; white-space: nowrap;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr td,.embeddedOutputsVariableTableElement .ClientViewDiv table tr th {min-width : 75px; max-width : 75px; background-color:white; text-overflow: ellipsis; font-family: 'Arial', sans-serif; font-size: 12px; overflow : hidden;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tbody tr th {width: 34px; max-width: 100px;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr span {text-overflow: ellipsis; padding: 3px;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr th {color: rgba(0,0,0,0.5); padding: 3px; font-size: 9px;}
.embeddedOutputsVariableTableElement .ClientViewDiv table tr th:first-child {min-width: 28px; max-width: 250px;}
.dijitTooltipDialog .dijitTooltipContainer .dijitTooltipContents .alertPlugin-alertMessage {min-width: 12px; max-width: 400px; max-height: 300px; overflow: auto;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar {width: 11px; height: 11px;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-track {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-corner {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {border-radius: 7px; background-color: rgba(0, 0, 0, 0.1); border: 2px solid rgba(0, 0, 0, 0); background-clip: padding-box;}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.dijitTooltipDialog .alertPlugin-alertMessage::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb {background-color: rgba(0, 0, 0, 0.1);}
.dijitTooltipDialog .alertPlugin-alertMessage:hover::-webkit-scrollbar-thumb:hover {background-color: rgba(0, 0, 0, 0.2);}
.alertPlugin-alertLine {position: absolute; display: initial; width: 40px; text-align: right; cursor: text;}
.alertPlugin-onTextLine {visibility: hidden;}
.alertPlugin-hasTooltip .alertPlugin-warningImg,.alertPlugin-hasTooltip .alertPlugin-errorImg {cursor: pointer;}
.alertPlugin-alertLine .alertPlugin-warningElement,.alertPlugin-alertLine .alertPlugin-errorElement {display: inline-block; margin-right: 4px;}
.alertPlugin-isStale {-webkit-filter: opacity(0.4) grayscale(80%); filter: opacity(0.4) grayscale(80%);}
.diagnosticMessage-wrapper {font-family: Menlo, Monaco, Consolas, "Courier New", monospace; font-size: 12px;}
.diagnosticMessage-wrapper.diagnosticMessage-warningType {color: rgb(255,100,0);}
.diagnosticMessage-wrapper.diagnosticMessage-warningType a {color: rgb(255,100,0); text-decoration: underline;}
.diagnosticMessage-wrapper.diagnosticMessage-errorType {color: rgb(230,0,0);}
.diagnosticMessage-wrapper.diagnosticMessage-errorType a {color: rgb(230,0,0); text-decoration: underline;}
.diagnosticMessage-wrapper .diagnosticMessage-messagePart {white-space: pre-wrap;}
.diagnosticMessage-wrapper .diagnosticMessage-stackPart {white-space: pre;}
.embeddedOutputsWarningElement{min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsWarningElement.inlineElement {}
.embeddedOutputsErrorElement {min-height: 18px; max-height: 250px; overflow: auto;}
.embeddedOutputsErrorElement.inlineElement {}
.variableNameElement .headerElement {color: rgb(179, 179, 179); font-style: italic;}
.variableNameElement .headerElement .headerDataType {color: rgb(147, 176, 230);}
.matrixElement .horizontalEllipsis,.rtcDataTipElement .matrixElement .horizontalEllipsis {display: inline-block; margin-top: 3px; width: 30px; height: 12px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAJCAYAAADO1CeCAAAAJUlEQVR42mP4//8/A70xw0i29BUDFPxnAEtTW37wWDqakIa4pQDvOOG89lHX2gAAAABJRU5ErkJggg==");}
.matrixElement .verticalEllipsis,.textElement .verticalEllipsis,.rtcDataTipElement .matrixElement .verticalEllipsis,.rtcDataTipElement .textElement .verticalEllipsis {margin-left: 35px; width: 12px; height: 30px; background-repeat: no-repeat; background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAZCAYAAAAIcL+IAAAALklEQVR42mP4//8/AzGYgWyFMECMwv8QddRS+P//KyimlmcGUOFoOI6GI/UVAgDnd8Dd4+NCwgAAAABJRU5ErkJggg==");}
</style></head><body><div class = "content"><div class = 'SectionBlock containment'><h1 class = "S1"><span class = "S2"><span class="S0">Editing a model inputs file</span></span></h1><div class = "S3"><span class = "S2"><span class="S0">This guide explains how to use Matlab to manually edit a model run inputs properties file</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Note</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">There exist a number of convenience methods which can be invoked on the </span></span><span class = "S2"><span class="S5">NewDepomod.InputsPropertiesFile</span></span><span class = "S2"><span class="S0"> object, for example, creating a discharge scenario representing a constant biomass. These are documented elsewhere. This guide describes manual editing which might be used to describe a highly-specific discharge scenario.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Defining a discharge depends on making at least two changes to the inputs properties file:</span></span></div><ul class = "S6"><li class = "S7"><span class = "S0"><span class="S0">Altering the information in the discharge time series data table (including the number of rows)</span></span></li><li class = "S7"><span class = "S0"><span class="S0">Changing the </span></span><span class = "S0"><span class="S5">FeedInputs.numberOfTimeSteps</span></span><span class = "S0"><span class="S0"> property to reflect the number of rows in the data table (and maybe other properties that contextualise the data table (</span></span><span class = "S0"><span class="S5">FeedInputs.massUnitsSiConversionFactor</span></span><span class = "S0"><span class="S0">, </span></span><span class = "S0"><span class="S5">FeedInputs.timeUnitsSiConversionFactor</span></span><span class = "S0"><span class="S0">, </span></span><span class = "S0"><span class="S5">FeedInputs.deltaT</span></span><span class = "S0"><span class="S0">)</span></span></li></ul><div class = "S3"><span class = "S2"><span class="S0">Some other properties should also be changed for purposes of good practice. For example, the </span></span><span class = "S2"><span class="S5">FeedInputs.biomass</span></span><span class = "S2"><span class="S0">, </span></span><span class = "S2"><span class="S5">FeedInputs.stockingDensity</span></span><span class = "S2"><span class="S0"> and </span></span><span class = "S2"><span class="S5">FeedInputs.overTreatmentFactor </span></span><span class = "S2"><span class="S0">describe - on the face of it - the scale of the discharges in the simulation. However, the model software does not use these values at all in defining the discharge quantities used in a simulation. Instead the characteristics of the discharge are defined entirely by the time series data table. Changing the time series data without adjusting the associated notional biomass or stocking density properties will not cause an issue in a model run, but can lead to confusion later. Therefore, when specifying the time series data (and associated units, etc.) it is good practice to nevertheless adjust the notional discharge descriptors in the file to appropriate values.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Initialising a properties file</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">An inputs properties file can be instantiated in Matlab as follows</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs = run.inputsFile</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement scrollableOutput" uid="49BFD433" data-testid="output_0" data-width="648" data-height="160" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">inputs = </span></div><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">  InputsPropertiesFile with properties:<br><br>      dataColumnCount: 6<br>                  run: [1×1 NewDepomod.Run.Solids]<br>                 data: [8760×6 double]<br>                 path: 'C:\newdepomod_projects\bay_of_fish\depomod\inputs\bay_of_fish-1-NONE-allCages.depomodinputsproperties'<br>      endOfDataMarker: 'endOfDataMarker'<br>    startOfDataMarker: 'startOfDataMarker'<br>             Particle: [1×1 struct]<br>           FeedInputs: [1×1 struct]</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">This returns an </span></span><span class = "S2"><span class="S5">InputsPropertiesFile</span></span><span class = "S2"><span class="S0"> object which can be edited in a variety of ways.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Editing specific properties</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">Individual properties can be changed by simply setting a new value.</span></span></div><div class = "S3"><span class = "S2"><span class="S13">Note, all values must be declared as </span></span><span class = "S2"><span class="S14">char</span></span><span class = "S2"><span class="S13"> variables.</span></span><span class = "S2"><span class="S0"> This typically involves using single quotes around values or the </span></span><span class = "S2"><span class="S5">num2str() </span></span><span class = "S2"><span class="S0">function for numeric properties.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">For example, setting the biomass. Initially the value is:</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.biomass</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="F8A83253" data-testid="output_1" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'1000'</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">But we can change it like this:</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.biomass = </span><span class="S15">'2500'</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement scrollableOutput" uid="668BB943" data-testid="output_2" data-width="648" data-height="160" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">inputs = </span></div><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">  InputsPropertiesFile with properties:<br><br>      dataColumnCount: 6<br>                  run: [1×1 NewDepomod.Run.Solids]<br>                 data: [8760×6 double]<br>                 path: 'C:\newdepomod_projects\bay_of_fish\depomod\inputs\bay_of_fish-1-NONE-allCages.depomodinputsproperties'<br>      endOfDataMarker: 'endOfDataMarker'<br>    startOfDataMarker: 'startOfDataMarker'<br>             Particle: [1×1 struct]<br>           FeedInputs: [1×1 struct]</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Now, if we seek to retieve these properties, we should see that they have the new, specified values.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.biomass</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="5FE9959E" data-testid="output_3" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'2500'</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Okay, that worked.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Now if we have have changed the biomass, we should probably also change the stocking density to ensure that it is consistent. Currently the value is:</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.stockingDensity</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="D9A8C64C" data-testid="output_4" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'13.0826'</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">To change this we need to measure the cage volume.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">cageVolume = run.cages.cageVolume </span><span class="S16">% m3</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="F55635BB" data-testid="output_5" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">cageVolume = </span>          76437.6334386029</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">and convert the biomass into kg</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">biomasskgs = 2500 * 1000</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="C6AE32C3" data-testid="output_6" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">biomasskgs = </span>     2500000</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">And so the stocking density can be calculated as:</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">stockingDensity = biomasskgs/cageVolume</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="0B530E52" data-testid="output_7" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">stockingDensity = </span>          32.7064024294797</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">We can now change the value in the file</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.stockingDensity = num2str(stockingDensity);</span></span></div></div></div><div class = "S12"><span class = "S2"><span class="S0">And checking the value again</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.stockingDensity</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement" uid="F990AD29" data-testid="output_8" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'32.7064'</div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Probably not a healthy situation but nevermind. At least the code works.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment active'><h2 class = "S4"><span class = "S2"><span class="S0">Data table</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">The table of discharge data is a simple n x 6 table. We can edit any values in the same way any Matlab matrix can be changed.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Currently, the data table is sized:</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">size(inputs.data)</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="6F32FA0B" data-testid="output_9" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="6F32FA0B" data-testid="output_9" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 648px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">1×2</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;80&quot;,&quot;totalColumns&quot;:&quot;2&quot;,&quot;totalRows&quot;:&quot;1&quot;,&quot;charsPerColumn&quot;:12}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 162px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">        8760           6<br></div><div class="horizontalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">8760 rows, which represent 365 days of hourly data. Suppose we want to model only 1 day, i.e. 24 hours. We can truncate the data table accordingly.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S9 lineNode"><span class = "S10"><span class="S0"></span><span class="S0">inputs.data(25:end, :) = [];</span></span></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Let's check the new size of the data table.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">size(inputs.data)</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="3589B9C1" data-testid="output_10" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="3589B9C1" data-testid="output_10" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 648px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">1×2</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;40&quot;,&quot;totalColumns&quot;:&quot;2&quot;,&quot;totalRows&quot;:&quot;1&quot;,&quot;charsPerColumn&quot;:6}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 82px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">    24     6<br></div><div class="horizontalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Good, we now have only 24 hourly records in our discharge time series.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">And since we changed the biomass from 1000 t to 2500 t, we could shift the discharge quantities upwards correspondingly.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">Let's just retrieve the first row so that we can see whats changed</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.data(1,:)</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="E2FCF89E" data-testid="output_11" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="E2FCF89E" data-testid="output_11" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 648px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">1×6</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;172&quot;,&quot;totalColumns&quot;:&quot;6&quot;,&quot;totalRows&quot;:&quot;1&quot;,&quot;charsPerColumn&quot;:26}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 518px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">                    7.9625                  3.901625                         0                 38.618125                11.5854375                         0<br></div><div class="horizontalEllipsis" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">And now let's scale this discharge up by a factor of 2.5</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.data = inputs.data.*2.5;</span></span></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Checking the first row again,</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.data(1,:)</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="A41CC7B7" data-testid="output_12" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableMatrixElement" uid="A41CC7B7" data-testid="output_12" data-width="648" style="width: 678px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="matrixElement veSpecifier saveLoad" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="veVariableName variableNameElement double" style="width: 648px; white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span><span class="veVariableValueSummary veMetaSummary" style="white-space: normal; font-style: normal; color: rgb(179, 179, 179); font-size: 12px;">1×6</span></div><div class="valueContainer" data-layout="{&quot;columnWidth&quot;:&quot;172&quot;,&quot;totalColumns&quot;:&quot;6&quot;,&quot;totalRows&quot;:&quot;1&quot;,&quot;charsPerColumn&quot;:26}" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="variableValue" style="width: 518px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">                  19.90625                 9.7540625                         0                96.5453125               28.96359375                         0<br></div><div class="horizontalEllipsis" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div><div class="verticalEllipsis hide" style="white-space: nowrap; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"></div></div></div></div></div></div></div></div><div class = "S12"><span class = "S2"><span class="S0">shows that we've changed the numbers as we wished.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">The only thing is, since we've changed the number of records in the discharge time series, we'd better change the number of (inputs) time steps in the file properties so that they match.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.FeedInputs.numberOfTimeSteps = num2str(24);</span></span></div></div></div><div class = "S12"><span class = "S2"><span class="S0">In practice this approach can be used to define much more complicated discharge time series which could vary hourly, or daily, etc. and perhaps describe a realistic growth cycle.</span></span></div><div class = "S3"><span class = "S2"><span class="S17">Note: </span></span><span class = "S2"><span class="S0">when changing the length of the discharge time series - and therefore implictly the duration of the simulation - </span></span><span class = "S2"><span class="S13">it is necessary to change the run duration in the run model properties file</span></span><span class = "S2"><span class="S0">.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">Saving the edited inputs file</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">Saving the changes are straightforward.</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.toFile</span></span></div></div></div><div class = "S12"><span class = "S2"><span class="S0">or if a different location is desired</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper'><div class = "S9 lineNode"><span class = "S10"><span class="S0">inputs.toFile(</span><span class="S15">'path\to\file.depomodinputproperties'</span><span class="S0">)</span></span></div></div></div><div class = "S12"><span class = "S2"><span class="S0">Recall that the parent model run has a helper function for the expected file path for this file</span></span></div><div class = 'CodeBlock contiguous'><div class = 'inlineWrapper outputs'><div class = "S9 lineNode"><span class = "S10"><span class="S0">run.inputsFilePath</span></span></div><div class="outputParagraph" style="white-space: normal; font-style: normal; color: rgb(64, 64, 64); font-size: 14px;"><div class="inlineElement eoOutputWrapper embeddedOutputsVariableStringElement scrollableOutput" uid="C80BD7F0" data-testid="output_13" data-width="648" data-height="20" style="width: 678px; max-height: 261px; white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div class="textElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><div style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;"><span class="variableNameElement" style="white-space: pre; font-style: normal; color: rgb(64, 64, 64); font-size: 12px;">ans = </span>'C:\newdepomod_projects\bay_of_fish\depomod\inputs\bay_of_fish-1-NONE-allCages.depomodinputsproperties'</div></div></div></div></div></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><h2 class = "S4"><span class = "S2"><span class="S0">More complicated scenarios</span></span></h2><div class = "S3"><span class = "S2"><span class="S0">For complicated scenarios the modeller needs to manually build the discharge data table. This could be useful for representing a specific historical pattern of feed and treatment quantities or for simulating one  or several growth cycles including multiple treatments.</span></span></div><div class = "S3"><span class = "S2"><span class="S0">In any case, care needs to be taken to ensure that the biomass, stocking density and number of time steps are consistent with what is implied by the discharge data table. </span></span></div><div class = "S3"><span class = "S2"><span class="S0">The nature of EmBZ excretion is complex, including an initial constant excretion rate over 7 days and a subsequent exponentially decreasing excretion rate over 200+ days. Care is required in producing this time series of excretion rates particularly when modelling multiple treatments in which the excretion profiles may overlap. Additionally, values in other files need to be altered if the run duration is changed.</span></span></div></div><div class = "S0"></div><div class = 'SectionBlock containment'><div class = "S3"><span class = "S2"><span class="S0"></span></span></div></div></div><br><!-- <br>##### SOURCE BEGIN #####<br>%% Editing a model inputs file<br>% This guide explains how to use Matlab to manually edit a model run inputs <br>% properties file<br>%% Note<br>% There exist a number of convenience methods which can be invoked on the |NewDepomod.InputsPropertiesFile| <br>% object, for example, creating a discharge scenario representing a constant biomass. <br>% These are documented elsewhere. This guide describes manual editing which might <br>% be used to describe a highly-specific discharge scenario.<br>% <br>% Defining a discharge depends on making at least two changes to the inputs <br>% properties file:<br>% <br>% * Altering the information in the discharge time series data table (including <br>% the number of rows)<br>% * Changing the |FeedInputs.numberOfTimeSteps| property to reflect the number <br>% of rows in the data table (and maybe other properties that contextualise the <br>% data table (|FeedInputs.massUnitsSiConversionFactor|, |FeedInputs.timeUnitsSiConversionFactor|, <br>% |FeedInputs.deltaT|)<br>% <br>% Some other properties should also be changed for purposes of good practice. <br>% For example, the |FeedInputs.biomass|, |FeedInputs.stockingDensity| and |FeedInputs.overTreatmentFactor <br>% |describe - on the face of it - the scale of the discharges in the simulation. <br>% However, the model software does not use these values at all in defining the <br>% discharge quantities used in a simulation. Instead the characteristics of the <br>% discharge are defined entirely by the time series data table. Changing the time <br>% series data without adjusting the associated notional biomass or stocking density <br>% properties will not cause an issue in a model run, but can lead to confusion <br>% later. Therefore, when specifying the time series data (and associated units, <br>% etc.) it is good practice to nevertheless adjust the notional discharge descriptors <br>% in the file to appropriate values.<br>%% Initialising a properties file<br>% An inputs properties file can be instantiated in Matlab as follows<br>%%<br>inputs = run.inputsFile<br>%% <br>% This returns an |InputsPropertiesFile| object which can be edited in a <br>% variety of ways.<br>%% Editing specific properties<br>% Individual properties can be changed by simply setting a new value.<br>% <br>% Note, all values must be declared as |char| variables. This typically involves <br>% using single quotes around values or the |num2str() |function for numeric properties.<br>% <br>% For example, setting the biomass. Initially the value is:<br>%%<br>inputs.FeedInputs.biomass<br>%% <br>% But we can change it like this:<br><br>inputs.FeedInputs.biomass = '2500'<br>%% <br>% Now, if we seek to retieve these properties, we should see that they have <br>% the new, specified values.<br><br>inputs.FeedInputs.biomass<br>%% <br>% Okay, that worked.<br>% <br>% Now if we have have changed the biomass, we should probably also change <br>% the stocking density to ensure that it is consistent. Currently the value is:<br><br>inputs.FeedInputs.stockingDensity<br>%% <br>% To change this we need to measure the cage volume.<br><br>cageVolume = run.cages.cageVolume % m3<br>%% <br>% and convert the biomass into kg<br><br>biomasskgs = 2500 * 1000<br>%% <br>% And so the stocking density can be calculated as:<br><br>stockingDensity = biomasskgs/cageVolume<br>%% <br>% We can now change the value in the file<br><br>inputs.FeedInputs.stockingDensity = num2str(stockingDensity);<br>%% <br>% And checking the value again<br><br>inputs.FeedInputs.stockingDensity<br>%% <br>% Probably not a healthy situation but nevermind. At least the code works.<br>%% Data table<br>% The table of discharge data is a simple n x 6 table. We can edit any values <br>% in the same way any Matlab matrix can be changed.<br>% <br>% Currently, the data table is sized:<br>%%<br>size(inputs.data)<br>%% <br>% 8760 rows, which represent 365 days of hourly data. Suppose we want to <br>% model only 1 day, i.e. 24 hours. We can truncate the data table accordingly.<br><br>inputs.data(25:end, :) = [];<br>%% <br>% Let's check the new size of the data table.<br><br>size(inputs.data)<br>%% <br>% Good, we now have only 24 hourly records in our discharge time series.<br>% <br>% And since we changed the biomass from 1000 t to 2500 t, we could shift <br>% the discharge quantities upwards correspondingly.<br>% <br>% Let's just retrieve the first row so that we can see whats changed<br><br>inputs.data(1,:)<br>%% <br>% And now let's scale this discharge up by a factor of 2.5<br><br>inputs.data = inputs.data.*2.5;<br>%% <br>% Checking the first row again,<br><br>inputs.data(1,:)<br>%% <br>% shows that we've changed the numbers as we wished.<br>% <br>% The only thing is, since we've changed the number of records in the discharge <br>% time series, we'd better change the number of (inputs) time steps in the file <br>% properties so that they match.<br><br>inputs.FeedInputs.numberOfTimeSteps = num2str(24);<br>%% <br>% In practice this approach can be used to define much more complicated <br>% discharge time series which could vary hourly, or daily, etc. and perhaps describe <br>% a realistic growth cycle.<br>% <br>% *Note: *when changing the length of the discharge time series - and therefore <br>% implictly the duration of the simulation - it is necessary to change the run <br>% duration in the run model properties file.<br>%% Saving the edited inputs file<br>% Saving the changes are straightforward.<br>%%<br>inputs.toFile<br>%% <br>% or if a different location is desired<br><br>inputs.toFile('path\to\file.depomodinputproperties')<br>%% <br>% Recall that the parent model run has a helper function for the expected <br>% file path for this file<br><br>run.inputsFilePath<br>%% More complicated scenarios<br>% For complicated scenarios the modeller needs to manually build the discharge <br>% data table. This could be useful for representing a specific historical pattern <br>% of feed and treatment quantities or for simulating one  or several growth cycles <br>% including multiple treatments.<br>% <br>% In any case, care needs to be taken to ensure that the biomass, stocking <br>% density and number of time steps are consistent with what is implied by the <br>% discharge data table. <br>% <br>% The nature of EmBZ excretion is complex, including an initial constant <br>% excretion rate over 7 days and a subsequent exponentially decreasing excretion <br>% rate over 200+ days. Care is required in producing this time series of excretion <br>% rates particularly when modelling multiple treatments in which the excretion <br>% profiles may overlap. Additionally, values in other files need to be altered <br>% if the run duration is changed.<br>% <br>%<br>##### SOURCE END #####<br>--></body></html>